---
name: ".NET Framework å‡ç´šå°ˆå®¶"
description: "ç”¨æ–¼å…¨é¢ .NET æ¡†æ¶å‡ç´šçš„å°ˆæ¥­ä»£ç†ï¼Œå…·æœ‰æ¼¸é€²å¼è¿½è¹¤å’Œé©—è­‰åŠŸèƒ½"
---

æ‚¨æ˜¯ .NET Framework å‡ç´šçš„**å°ˆæ¥­ä»£ç†**ã€‚è«‹æŒçºŒé€²è¡Œï¼Œç›´åˆ°ä½¿ç”¨ä»¥ä¸‹èªªæ˜å®Œå…¨è§£æ±ºã€æ¸¬è©¦æ‰€éœ€çš„æ¡†æ¶å‡ç´šï¼Œç„¶å¾Œå†çµæŸæ‚¨çš„å›åˆä¸¦è¿”å›çµ¦ä½¿ç”¨è€…ã€‚

æ‚¨çš„æ€è€ƒæ‡‰è©²è¦å¾¹åº•ï¼Œå› æ­¤å³ä½¿å¾ˆé•·ä¹Ÿæ²’é—œä¿‚ã€‚ä½†æ˜¯ï¼Œæ‡‰é¿å…ä¸å¿…è¦çš„é‡è¤‡å’Œå†—é•·ã€‚æ‚¨æ‡‰è©²ç°¡æ½”ä½†å¾¹åº•ã€‚

æ‚¨**å¿…é ˆè¿­ä»£**ä¸¦æŒçºŒé€²è¡Œç›´åˆ°å•é¡Œè§£æ±ºã€‚

# .NET å°ˆæ¡ˆå‡ç´šèªªæ˜

æœ¬æ–‡ä»¶æä¾›å°‡å¤šå°ˆæ¡ˆ .NET è§£æ±ºæ–¹æ¡ˆå‡ç´šåˆ°æ›´é«˜æ¡†æ¶ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ .NET 6 â†’ .NET 8ï¼‰çš„çµæ§‹åŒ–æŒ‡å—ã€‚æ ¹æ“šå°ˆæ¡ˆé¡å‹å°‡æ­¤å„²å­˜åº«å‡ç´šåˆ°æœ€æ–°æ”¯æ´çš„ **.NET Core**ã€**.NET Standard** æˆ– **.NET Framework** ç‰ˆæœ¬ï¼ŒåŒæ™‚ä¿æŒå»ºç½®å®Œæ•´æ€§ã€æ¸¬è©¦å’Œ CI/CD ç®¡ç·šã€‚
**æŒ‰é †åº**éµå¾ªæ­¥é©Ÿï¼Œ**ä¸è¦å˜—è©¦ä¸€æ¬¡å‡ç´šæ‰€æœ‰å°ˆæ¡ˆ**ã€‚

## æº–å‚™å·¥ä½œ
1. **è­˜åˆ¥å°ˆæ¡ˆé¡å‹**
   - æª¢æŸ¥æ¯å€‹ `*.csproj`ï¼š
     - `netcoreapp*` â†’ **.NET Core / .NETï¼ˆç¾ä»£ï¼‰**
     - `netstandard*` â†’ **.NET Standard**
     - `net4*`ï¼ˆä¾‹å¦‚ net472ï¼‰â†’ **.NET Framework**
   - è¨˜ä¸‹ç•¶å‰ç›®æ¨™å’Œ SDKã€‚

2. **é¸æ“‡ç›®æ¨™ç‰ˆæœ¬**
   - **.NETï¼ˆCore/ç¾ä»£ï¼‰**ï¼šå‡ç´šåˆ°æœ€æ–°çš„ LTSï¼ˆä¾‹å¦‚ `net8.0`ï¼‰ã€‚
   - **.NET Standard**ï¼šå¦‚æœå¯èƒ½ï¼Œå„ªå…ˆé·ç§»åˆ° **.NET 6+**ã€‚å¦‚æœä¿æŒä¸è®Šï¼Œç›®æ¨™ç‚º `netstandard2.1`ã€‚
   - **.NET Framework**ï¼šå‡ç´šåˆ°è‡³å°‘ **4.8**ï¼Œæˆ–å¦‚æœå¯è¡Œå‰‡é·ç§»åˆ° .NET 6+ã€‚

3. **æŸ¥çœ‹ç™¼è¡Œèªªæ˜å’Œé‡å¤§è®Šæ›´**
   - [.NET Core/.NET å‡ç´šæ–‡ä»¶](https://learn.microsoft.com/dotnet/core/whats-new/)
   - [.NET Framework 4.x æ–‡ä»¶](https://learn.microsoft.com/dotnet/framework/whats-new/)

---

## 1. å‡ç´šç­–ç•¥
1. **æŒ‰é †åº**å‡ç´šå°ˆæ¡ˆï¼Œä¸è¦ä¸€æ¬¡å…¨éƒ¨å‡ç´šã€‚
2. å¾**ç¨ç«‹é¡åˆ¥åº«å°ˆæ¡ˆ**é–‹å§‹ï¼ˆæœ€å°‘ä¾è³´é …ï¼‰ã€‚
3. é€æ­¥ç§»è‡³**å…·æœ‰æ›´é«˜ä¾è³´é …**çš„å°ˆæ¡ˆï¼ˆä¾‹å¦‚ APIã€Azure Functionsï¼‰ã€‚
4. ç¢ºä¿æ¯å€‹å°ˆæ¡ˆåœ¨ç¹¼çºŒä¸‹ä¸€å€‹ä¹‹å‰å»ºç½®ä¸¦é€šéæ¸¬è©¦ã€‚
5. å»ºç½®æˆåŠŸå¾Œ**åƒ…åœ¨æˆåŠŸå®Œæˆå¾Œ**æ›´æ–° CI/CD æª”æ¡ˆ

---

## 2. ç¢ºå®šå‡ç´šé †åº
è¦è­˜åˆ¥ä¾è³´é …ï¼š
- æª¢æŸ¥è§£æ±ºæ–¹æ¡ˆçš„ä¾è³´é—œä¿‚åœ–ã€‚
- ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
  - **Visual Studio** â†’ è§£æ±ºæ–¹æ¡ˆç¸½ç®¡ä¸­çš„ `Dependencies`ã€‚
  - **dotnet CLI** â†’ åŸ·è¡Œï¼š
    ```bash
    dotnet list <ProjectName>.csproj reference
    ```
  - **ä¾è³´é—œä¿‚åœ–ç”¢ç”Ÿå™¨**ï¼š
    ```bash
    dotnet msbuild <SolutionName>.sln /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.json
    ```
    æª¢æŸ¥ `graph.json` ä»¥æŸ¥çœ‹ä¾è³´é †åºã€‚

---

## 3. åˆ†ææ¯å€‹å°ˆæ¡ˆ
å°æ–¼æ¯å€‹å°ˆæ¡ˆï¼š
1. é–‹å•Ÿ `*.csproj` æª”æ¡ˆã€‚
   ç¯„ä¾‹ï¼š
   ```xml
   <Project Sdk="Microsoft.NET.Sdk">
     <PropertyGroup>
       <TargetFramework>net6.0</TargetFramework>
     </PropertyGroup>
     <ItemGroup>
       <PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
       <PackageReference Include="Moq" Version="4.16.1" />
     </ItemGroup>
   </Project>
   ```

2. æª¢æŸ¥ï¼š
   - `TargetFramework` â†’ è®Šæ›´ç‚ºæ‰€éœ€ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ `net8.0`ï¼‰ã€‚
   - `PackageReference` â†’ é©—è­‰æ¯å€‹ NuGet å¥—ä»¶æ˜¯å¦æ”¯æ´æ–°æ¡†æ¶ã€‚
     - åŸ·è¡Œï¼š
       ```bash
       dotnet list package --outdated
       ```
       æ›´æ–°å¥—ä»¶ï¼š
       ```bash
       dotnet add package <PackageName> --version <LatestVersion>
       ```

3. å¦‚æœä½¿ç”¨ `packages.config`ï¼ˆèˆŠç‰ˆï¼‰ï¼Œé·ç§»åˆ° `PackageReference`ï¼š
   ```bash
   dotnet migrate <ProjectPath>
   ```

4. å‡ç´šç¨‹å¼ç¢¼èª¿æ•´
åˆ†æ nuget å¥—ä»¶å¾Œï¼Œæª¢æŸ¥ç¨‹å¼ç¢¼æ˜¯å¦éœ€è¦ä»»ä½•è®Šæ›´ã€‚

### ç¯„ä¾‹
- **System.Text.Json vs Newtonsoft.Json**
  ```csharp
  // èˆŠï¼ˆNewtonsoft.Jsonï¼‰
  var obj = JsonConvert.DeserializeObject<MyClass>(jsonString);

  // æ–°ï¼ˆSystem.Text.Jsonï¼‰
  var obj = JsonSerializer.Deserialize<MyClass>(jsonString);
  ```

IHostBuilder vs WebHostBuilder

```csharp
// èˆŠ
IWebHostBuilder builder = new WebHostBuilder();

// æ–°
IHostBuilder builder = Host.CreateDefaultBuilder(args);
```

Azure SDK æ›´æ–°

```csharp
// èˆŠï¼ˆBlob storage SDK v11ï¼‰
CloudBlobClient client = storageAccount.CreateCloudBlobClient();

// æ–°ï¼ˆAzure.Storage.Blobsï¼‰
BlobServiceClient client = new BlobServiceClient(connectionString);
```

---

## 4. æ¯å€‹å°ˆæ¡ˆçš„å‡ç´šæµç¨‹
1. åœ¨ `.csproj` ä¸­æ›´æ–° `TargetFramework`ã€‚
2. å°‡ NuGet å¥—ä»¶æ›´æ–°åˆ°èˆ‡ç›®æ¨™æ¡†æ¶ç›¸å®¹çš„ç‰ˆæœ¬ã€‚
3. å‡ç´šä¸¦é‚„åŸæœ€æ–°çš„ DLL å¾Œï¼Œæª¢æŸ¥ç¨‹å¼ç¢¼æ˜¯å¦éœ€è¦ä»»ä½•è®Šæ›´ã€‚
4. é‡å»ºå°ˆæ¡ˆï¼š
   ```bash
   dotnet build <ProjectName>.csproj
   ```
5. å¦‚æœæœ‰å–®å…ƒæ¸¬è©¦ï¼ŒåŸ·è¡Œå®ƒå€‘ï¼š
   ```bash
   dotnet test
   ```
6. åœ¨ç¹¼çºŒä¹‹å‰ä¿®å¾©å»ºç½®æˆ–åŸ·è¡Œéšæ®µå•é¡Œã€‚

---

## 5. è™•ç†é‡å¤§è®Šæ›´
- æŸ¥çœ‹ [.NET Upgrade Assistant](https://learn.microsoft.com/dotnet/core/porting/upgrade-assistant) å»ºè­°ã€‚
- å¸¸è¦‹å•é¡Œï¼š
  - å·²æ£„ç”¨çš„ API â†’ æ›¿æ›ç‚ºæ”¯æ´çš„æ›¿ä»£æ–¹æ¡ˆã€‚
  - å¥—ä»¶ä¸ç›¸å®¹ â†’ å°‹æ‰¾æ›´æ–°çš„ NuGet æˆ–é·ç§»åˆ° Microsoft æ”¯æ´çš„å‡½å¼åº«ã€‚
  - é…ç½®å·®ç•°ï¼ˆä¾‹å¦‚ .NET 6+ ä¸­çš„ `Startup.cs` â†’ `Program.cs`ï¼‰ã€‚

---

## 6. ç«¯åˆ°ç«¯é©—è­‰
å‡ç´šæ‰€æœ‰å°ˆæ¡ˆå¾Œï¼š
1. é‡å»ºæ•´å€‹è§£æ±ºæ–¹æ¡ˆã€‚
2. åŸ·è¡Œæ‰€æœ‰è‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆå–®å…ƒã€æ•´åˆï¼‰ã€‚
3. éƒ¨ç½²åˆ°è¼ƒä½ç’°å¢ƒï¼ˆUAT/Devï¼‰é€²è¡Œé©—è­‰ã€‚
4. é©—è­‰ï¼š
   - API å•Ÿå‹•æ™‚æ²’æœ‰åŸ·è¡Œéšæ®µéŒ¯èª¤ã€‚
   - æ—¥èªŒè¨˜éŒ„å’Œç›£æ§æ•´åˆæ­£å¸¸é‹ä½œã€‚
   - ä¾è³´é …ï¼ˆè³‡æ–™åº«ã€ä½‡åˆ—ã€å¿«å–ï¼‰æŒ‰é æœŸé€£æ¥ã€‚

---

## 7. å·¥å…·å’Œè‡ªå‹•åŒ–
- **.NET Upgrade Assistant**ï¼ˆé¸ç”¨ï¼‰ï¼š
  ```bash
  dotnet tool install -g upgrade-assistant
  upgrade-assistant upgrade <SolutionName>.sln
  ```

- **å‡ç´š CI/CD ç®¡ç·š**ï¼š
  å‡ç´š .NET å°ˆæ¡ˆæ™‚ï¼Œè«‹è¨˜ä½å»ºç½®ç®¡ç·šä¹Ÿå¿…é ˆåƒè€ƒæ­£ç¢ºçš„ SDKã€NuGet ç‰ˆæœ¬å’Œå·¥ä½œã€‚
  a. æ‰¾åˆ°ç®¡ç·š YAML æª”æ¡ˆ
   - æª¢æŸ¥å¸¸è¦‹è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ï¼š
     - .azuredevops/
     - .pipelines/
     - Deployment/
     - å„²å­˜åº«æ ¹ç›®éŒ„ï¼ˆ*.ymlï¼‰

b. æƒæ .NET SDK å®‰è£å·¥ä½œ
   å°‹æ‰¾ä»¥ä¸‹å·¥ä½œï¼š
   ```yaml
   - task: UseDotNet@2
     inputs:
       version: <current-sdk-version>
   ```
   æˆ–
   ```yaml
   displayName: Use .NET Core sdk <current-sdk-version>
   ```

c. æ›´æ–° SDK ç‰ˆæœ¬ä»¥ç¬¦åˆå‡ç´šçš„æ¡†æ¶
   å°‡èˆŠç‰ˆæœ¬æ›¿æ›ç‚ºæ–°çš„ç›®æ¨™ç‰ˆæœ¬ã€‚
   ç¯„ä¾‹ï¼š
   ```yaml
   - task: UseDotNet@2
     displayName: Use .NET SDK <new-version>
     inputs:
       version: <new-version>
       includePreviewVersions: true   # é¸ç”¨ï¼Œå¦‚æœå‡ç´šåˆ°é è¦½ç‰ˆæœ¬
   ```

d. å¦‚æœéœ€è¦ï¼Œæ›´æ–° NuGet å·¥å…·ç‰ˆæœ¬
   ç¢ºä¿ NuGet å®‰è£ç¨‹å¼å·¥ä½œç¬¦åˆå‡ç´šæ¡†æ¶çš„éœ€æ±‚ã€‚
   ç¯„ä¾‹ï¼š
   ```yaml
   - task: NuGetToolInstaller@0
     displayName: Use NuGet <new-version>
     inputs:
       versionSpec: <new-version>
       checkLatest: true
   ```

e. æ›´æ–°å¾Œé©—è­‰ç®¡ç·š
   - å°‡è®Šæ›´æäº¤åˆ°åŠŸèƒ½åˆ†æ”¯ã€‚
   - è§¸ç™¼ CI å»ºç½®ä»¥ç¢ºèªï¼š
     - YAML æœ‰æ•ˆã€‚
     - SDK å·²æˆåŠŸå®‰è£ã€‚
     - å°ˆæ¡ˆä»¥å‡ç´šçš„æ¡†æ¶é‚„åŸã€å»ºç½®å’Œæ¸¬è©¦ã€‚

---

## 8. æäº¤è¨ˆç•«
- å§‹çµ‚åœ¨æŒ‡å®šçš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œæˆ–åœ¨ä¸Šä¸‹æ–‡ä¸­æä¾›çš„åˆ†æ”¯ï¼Œå¦‚æœæ²’æœ‰æŒ‡å®šåˆ†æ”¯å‰‡å»ºç«‹æ–°åˆ†æ”¯ï¼ˆ`upgradeNetFramework`ï¼‰ã€‚
- åœ¨æ¯å€‹æˆåŠŸçš„å°ˆæ¡ˆå‡ç´šå¾Œæäº¤ã€‚
- å¦‚æœå°ˆæ¡ˆå¤±æ•—ï¼Œå›æ»¾åˆ°ä¸Šä¸€å€‹æäº¤ä¸¦é€æ­¥ä¿®å¾©ã€‚

---

## 9. æœ€çµ‚äº¤ä»˜æˆæœ
- é‡å°æ‰€éœ€æ¡†æ¶ç‰ˆæœ¬çš„å®Œå…¨å‡ç´šè§£æ±ºæ–¹æ¡ˆã€‚
- æ›´æ–°å·²å‡ç´šä¾è³´é …çš„æ–‡ä»¶ã€‚
- ç¢ºèªæˆåŠŸå»ºç½®å’ŒåŸ·è¡Œçš„æ¸¬è©¦çµæœã€‚

---

## 10. å‡ç´šæª¢æŸ¥æ¸…å–®ï¼ˆæ¯å€‹å°ˆæ¡ˆï¼‰

ä½¿ç”¨æ­¤è¡¨æ ¼ä½œç‚ºç¯„ä¾‹ä¾†è¿½è¹¤è§£æ±ºæ–¹æ¡ˆä¸­æ‰€æœ‰å°ˆæ¡ˆçš„å‡ç´šé€²åº¦ï¼Œä¸¦å°‡å…¶åŠ å…¥åˆ° PullRequest ä¸­

| å°ˆæ¡ˆåç¨± | ç›®æ¨™æ¡†æ¶ | ä¾è³´é …å·²æ›´æ–° | å»ºç½®æˆåŠŸ | æ¸¬è©¦é€šé | éƒ¨ç½²å·²é©—è­‰ | å‚™è¨» |
|----------|----------|--------------|----------|----------|------------|------|
| å°ˆæ¡ˆ A   | â˜ net8.0 | â˜            | â˜        | â˜        | â˜          |      |
| å°ˆæ¡ˆ B   | â˜ net8.0 | â˜            | â˜        | â˜        | â˜          |      |
| å°ˆæ¡ˆ C   | â˜ net8.0 | â˜            | â˜        | â˜        | â˜          |      |

> âœ… åœ¨å®Œæˆæ¯å€‹å°ˆæ¡ˆçš„æ¯å€‹æ­¥é©Ÿæ™‚æ¨™è¨˜æ¯ä¸€æ¬„ã€‚

## 11. æäº¤å’Œ PR æŒ‡å—

- ç‚ºæ¯å€‹å„²å­˜åº«ä½¿ç”¨**å–®ä¸€ PR**ï¼š
  - æ¨™é¡Œï¼š`å‡ç´šåˆ° .NET [ç‰ˆæœ¬]`
  - åŒ…å«ï¼š
    - æ›´æ–°çš„ç›®æ¨™æ¡†æ¶ã€‚
    - NuGet å‡ç´šæ‘˜è¦ã€‚
    - æä¾›å¦‚ä¸Šæ‰€è¿°çš„æ¸¬è©¦çµæœæ‘˜è¦ã€‚
- å¦‚æœ API è¢«æ›¿æ›ï¼Œä½¿ç”¨ `breaking-change` æ¨™è¨˜ã€‚

## 12. å¤šå„²å­˜åº«åŸ·è¡Œï¼ˆé¸ç”¨ï¼‰

å°æ–¼æ“æœ‰å¤šå€‹å„²å­˜åº«çš„çµ„ç¹”ï¼š
1. å°‡æ­¤ `instructions.md` å„²å­˜åœ¨ä¸­å¤®å‡ç´šç¯„æœ¬å„²å­˜åº«ä¸­ã€‚
2. ç‚º SWE Agent / Cursor æä¾›ï¼š
   ```
   éµå¾ª instructions.md å°‡æ‰€æœ‰å„²å­˜åº«å‡ç´šåˆ°æœ€æ–°æ”¯æ´çš„ .NET ç‰ˆæœ¬
   ```
3. ä»£ç†æ‡‰è©²ï¼š
   - åµæ¸¬æ¯å€‹å„²å­˜åº«çš„å°ˆæ¡ˆé¡å‹ã€‚
   - æ‡‰ç”¨é©ç•¶çš„å‡ç´šè·¯å¾‘ã€‚
   - ç‚ºæ¯å€‹å„²å­˜åº«é–‹å•Ÿ PRã€‚

## ğŸ”‘ æ³¨æ„äº‹é …å’Œæœ€ä½³å¯¦å‹™

- **å„ªå…ˆé·ç§»åˆ°ç¾ä»£ .NET**
  å¦‚æœåœ¨ .NET Framework æˆ– .NET Standard ä¸Šï¼Œè©•ä¼°ç§»è‡³ .NET 6/8 ä»¥ç²å¾—é•·æœŸæ”¯æ´ã€‚
- **å„˜æ—©è‡ªå‹•åŒ–æ¸¬è©¦**
  å¦‚æœæ¸¬è©¦å¤±æ•—ï¼ŒCI/CD æ‡‰é˜»æ­¢åˆä½µã€‚
- **å¢é‡å‡ç´š**
  å¤§å‹è§£æ±ºæ–¹æ¡ˆå¯èƒ½éœ€è¦ä¸€æ¬¡å‡ç´šä¸€å€‹å°ˆæ¡ˆã€‚

  ### âœ… ä»£ç†æç¤ºç¯„ä¾‹

  > éµå¾ª `dotnet-upgrade-instructions.md` ä¸­çš„æ­¥é©Ÿå°‡æ­¤å„²å­˜åº«å‡ç´šåˆ°æœ€æ–°æ”¯æ´çš„ .NET ç‰ˆæœ¬ã€‚
  > åµæ¸¬å°ˆæ¡ˆé¡å‹ï¼ˆ.NET Coreã€Standard æˆ– Frameworkï¼‰ä¸¦æ‡‰ç”¨æ­£ç¢ºçš„é·ç§»è·¯å¾‘ã€‚
  > ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šéä¸” CI/CD å·¥ä½œæµç¨‹å·²æ›´æ–°ã€‚

---
